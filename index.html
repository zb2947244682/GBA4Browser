<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>mGBA 模拟器</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="gameboy">
    <div id="emulator-container">
      <canvas id="gba-canvas"></canvas>
      <input type="file" id="rom-upload" accept=".gba,.gbc,.gb,.zip,.7z">
      <div class="upload-text">点击屏幕上传ROM</div>
    </div>
    
    <div class="controls-area">
      <div class="shoulder-buttons">
        <div class="shoulder-button" ontouchstart="pressButton('l')" ontouchend="releaseButton('l')">L</div>
        <div class="shoulder-button" ontouchstart="pressButton('r')" ontouchend="releaseButton('r')">R</div>
      </div>
      
      <div class="main-controls">
        <div class="dpad">
          <div class="dpad-button dpad-up" ontouchstart="pressButton('up')" ontouchend="releaseButton('up')"></div>
          <div class="dpad-button dpad-right" ontouchstart="pressButton('right')" ontouchend="releaseButton('right')"></div>
          <div class="dpad-button dpad-down" ontouchstart="pressButton('down')" ontouchend="releaseButton('down')"></div>
          <div class="dpad-button dpad-left" ontouchstart="pressButton('left')" ontouchend="releaseButton('left')"></div>
          <div class="dpad-button dpad-center"></div>
        </div>
        
        <div class="action-buttons">
          <div class="round-button button-b" ontouchstart="pressButton('b')" ontouchend="releaseButton('b')">B</div>
          <div class="round-button button-a" ontouchstart="pressButton('a')" ontouchend="releaseButton('a')">A</div>
        </div>
      </div>
      
      <div class="menu-buttons">
        <div class="menu-button" ontouchstart="pressButton('select')" ontouchend="releaseButton('select')">SELECT</div>
        <div class="menu-button" ontouchstart="pressButton('start')" ontouchend="releaseButton('start')">START</div>
      </div>
    </div>
    
    <div class="function-bar">
      <div class="function-button" onclick="saveState()">
        <div class="function-icon">💾</div>
        <div>存档</div>
      </div>
      <div class="function-button" onclick="loadState()">
        <div class="function-icon">📂</div>
        <div>读档</div>
      </div>
      <div class="function-button" onclick="window.location.reload()">
        <div class="function-icon">🔄</div>
        <div>重置</div>
      </div>
      <div class="function-button" onclick="showLogs()">
        <div class="function-icon">📋</div>
        <div>日志</div>
      </div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>